(dp1
S'output'
p2
S"<type 'exceptions.ValueError'> invalid literal for long() with base 10: 'Spanish.json'"
p3
sS'layer'
p4
S'D:\\BACKUP\\web2pyVersion2.14.6\\applications\\esc_legajos\\controllers/medica.py'
p5
sS'code'
p6
S'\t\t\nfrom gluon.serializers import json\n@auth.requires(auth.has_membership(role = \'Super\')|auth.has_membership(role = \'Jefe de cuerpo\')|auth.has_membership(role = \'Enfermer@s\')|auth.has_membership(role = \'Director\')) \n\n\ndef medica():\n\tset_todo=db(db.legajo).select()\n\tmf = json(set_todo)\n\treturn dict(set_todo=set_todo,mf=mf)\ndef mostrar():\n\tdni=request.args[0]\n\tset_todo=db(db.n_medicas.dni==dni).select()\n\tcuanto=len(set_todo)\n\tcuanto=int(cuanto)\n\t\n\tif cuanto==0:\n\t\tredirect(URL(c=\'medica\',f=\'mensaje\',args=[dni]))\n\telse:\n\t\tmf = json(set_todo)\n \n\treturn dict(dni=dni,set_todo=set_todo,cuanto=cuanto,mf=mf)#(set_todo=set_todo,mf=mf)\ndef mensaje():\n\tdni=request.args[0]\n\treturn dict(dni=dni)\ndef ingreso():\n\tfrom datetime import datetime, date, time, timedelta\n\timport datetime\n\timport time\n\timport calendar\n\t\n\tdni=request.args[0]\n\tset_leg=db(db.legajo.dni==dni).select().first()\n\tnombre=set_leg.nombre\n\tapellido=set_leg.apellido\n\n\tform=SQLFORM.factory(\n\tField(\'dni\',\'integer\'),\n    Field(\'apellido\',requires=IS_UPPER()),\n    Field(\'nombre\',requires=IS_UPPER()),\n\tField(\'fecha\',\'datetime\',label="fecha de ingreso de nota",requires=[IS_NOT_EMPTY(error_message=\'El campo no puede estar vacio ej: 20/02/2000\'), IS_DATE(format=\'%d/%m/%Y\'),]),\n    Field(\'diagnostico\',requires=IS_UPPER()),\n    Field(\'reposo\',\n\t\t\trequires=[IS_MATCH(\'^[0-9\\s]+$\',error_message="Ingrese la cantidad de dias con numeros"),\n\t\t\t\t\t\tIS_NOT_EMPTY()]),\t\t \n    Field(\'t_reposo\',requires=IS_IN_SET(["ABSOLUTO","RELATIVO"],error_message=\'Elija el tipo de reposo\'),),\n    Field(\'medico\',requires=IS_UPPER(),label="Medico otorgante"), \n    Field(\'fecha_c\',\'datetime\',label="fecha de cumplimiento",requires=[IS_NOT_EMPTY(error_message=\'El campo no puede estar vacio ej: 20/02/2000\'), IS_DATE(format=\'%d/%m/%Y\'),]),\n\n\t\t)\n\tif form.accepts(request,session):\n\t\tdb.n_medicas.insert(dni=dni,apellido=apellido,nombre=nombre,fecha=form.vars.fecha,diagnostico=form.vars.diagnostico,\n\t\t\treposo=form.vars.reposo,t_reposo=form.vars.t_reposo,medico=form.vars.medico,fecha_c=form.vars.fecha_c)\t\n\t\tredirect(URL(c=\'medica\',f=\'cargado\',args=[dni]))\n\telif form.errors:\n        \tresponse.flash = \'el formulario tiene errores\'\n    \telse:\n        \tresponse.flash = \'por favor complete el formulario\'\n\treturn dict(set_leg=set_leg,nombre=nombre,apellido=apellido,dni=dni,form=form)\n@auth.requires(auth.has_membership(role = \'Super\')|auth.has_membership(role = \'Jefe de cuerpo\')|auth.has_membership(role = \'Enfermer@s\')) \t\ndef editar():\n\tid=request.args[0]\n\tset_medica=db(db.n_medicas.id==id).select().first()\n\tdni=set_medica.dni\n\tapellido=set_medica.apellido\n\tnombre=set_medica.nombre\n\tfecha=set_medica.fecha\n\tdiagnostico=set_medica.diagnostico\n\treposo=set_medica.reposo\n\tt_reposo=set_medica.t_reposo\n\tmedico=set_medica.medico\n\tfecha_c=set_medica.fecha_c\n\tform=SQLFORM.factory(\n\tField(\'dni\',\'integer\'),\n    Field(\'apellido\',requires=IS_UPPER()),\n    Field(\'nombre\',requires=IS_UPPER()),\n\tField(\'fecha\',\'datetime\',label="fecha de ingreso de nota",requires=[IS_NOT_EMPTY(error_message=\'El campo no puede estar vacio ej: 20/02/2000\'), IS_DATE(format=\'%d/%m/%Y\'),],default=fecha),\n    Field(\'diagnostico\',requires=IS_UPPER(),default=diagnostico),\n    Field(\'reposo\',\n\t\t\trequires=[IS_MATCH(\'^[0-9\\s]+$\',error_message="Ingrese la cantidad de dias con numeros"),\n\t\t\t\t\t\tIS_NOT_EMPTY()],default=reposo),\t\t \n    Field(\'t_reposo\',requires=IS_IN_SET(["ABSOLUTO","RELATIVO"]\n    \t,error_message=\'Elija el tipo de reposo\'),default=t_reposo),\n    Field(\'medico\',requires=IS_UPPER(),label="Medico otorgante",default=medico), \n    Field(\'fecha_c\',\'datetime\',label="fecha de cumplimiento"\n    \t,requires=[IS_NOT_EMPTY(error_message=\'El campo no puede estar vacio ej: 20/02/2000\')\n    \t, IS_DATE(format=\'%d/%m/%Y\'),],default=fecha_c),\n\n\t\t)\n\tif form.accepts(request,session):\n\t\tset_medica.update_record(dni=dni,apellido=apellido,nombre=nombre,fecha=form.vars.fecha,diagnostico=form.vars.diagnostico,\n\t\t\treposo=form.vars.reposo,t_reposo=form.vars.t_reposo,medico=form.vars.medico,fecha_c=form.vars.fecha_c)\n\t\tredirect(URL(c=\'medica\',f=\'mensajes\',args=[dni]))\n\telif form.errors:\n        \tresponse.flash = \'el formulario tiene errores\'\n    \telse:\n        \tresponse.flash = \'por favor complete el formulario\'\n\n\n\treturn dict(id=id,form=form,dni=dni,apellido=apellido,nombre=nombre,fecha=fecha,\n\t\tdiagnostico=diagnostico,reposo=reposo,t_reposo=t_reposo,medico=medico,fecha_c=fecha_c)\ndef cargado():\n\treturn dict()\ndef mensajes():\n\tdni=id=request.args[0]\n\n\treturn dict(dni=dni)\n\n\n\n\nresponse._vars=response._caller(mostrar)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\applications\\esc_legajos\\controllers/medica.py", line 111, in <module>\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\applications\\esc_legajos\\controllers/medica.py", line 12, in mostrar\n    set_todo=db(db.n_medicas.dni==dni).select()\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\objects.py", line 2020, in select\n    return adapter.select(self.query, fields, attributes)\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\sqlite.py", line 123, in select\n    return super(SQLiteAdapter, self).select(query, fields, attributes)\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1283, in select\n    sql = self._select(query, fields, attributes)\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1170, in _select\n    sql_w = \' WHERE \' + self.expand(query) if query else \'\'\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 952, in expand\n    rv = op(first, second, **optional_args)\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 846, in EQ\n    self.expand(second, first.type))\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 962, in expand\n    rv = self.represent(expression, field_type)\n  File "D:\\BACKUP\\web2pyVersion2.14.6\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1435, in represent\n    return str(long(obj))\nValueError: invalid literal for long() with base 10: \'Spanish.json\'\n'
p11
s.